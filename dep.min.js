(dep=function(a){function f(a){var g=b[a],h,i,j;if(!g)return;b[a]=0;for(h=0;h<g.length;h++)i=g[h],--c[i]==0&&!d[i]&&(d[i]=1,j=e[i],j&&j(),f(i))}var b={},c={},d={},e={};return a.define=function(g,h,i){var j,k,l=[];for(j=0;h&&j<h.length;j++)d[h[j]]||l.push(h[j]);if(!l.length){d[g]=1,i&&i(),f(g);return}e[g]=i,c[g]=l.length;for(j=0;j<l.length;j++)k=l[j],(b[k]||(b[k]=[])).push(g);if(a.load)for(j=0;j<l.length;j++)a.load(l[j])},a})(dep);